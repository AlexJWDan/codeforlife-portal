{% extends 'portal/base.html' %}
{% load staticfiles %}

{% block scripts %}
{{ block.super }}
<script type="text/javascript" src='{% static "portal/js/play.js" %}'></script>
<script type="text/javascript" src="{% static 'portal/js/passwordStrength.js' %}"></script>
<script>
var PASSWORD_FIELD_ID = '{{ signup_form.password.auto_id }}';
var PASSWORD_TYPE = 'STUDENT';
var SOLO_VIEW = {% if solo_view %}true{% else %}false{% endif %};
var SIGNUP_VIEW = {% if signup_view %}true{% else %}false{% endif %};
</script>
{% endblock scripts %}

{% block content %}
{{block.super}}

<div class="warningIE">In order to play, please <a href="http://browsehappy.com/">update your browser</a></div>

<div class="section group">
    <div class="col span_2_of_3">
        <h3>Learning to code is fun</h3>
        <p>
          Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed metus nibh, accumsan et fringilla eu, dapibus in dui. Proin leo est, varius non vestibulum et, tempor vitae nulla. Etiam ut nisl nec mauris elementum vestibulum. 
         </p>
     
     
        <div class="gameBoxPlay">
        
            <h3>Rapid Router - Our first app</h3>
            <div class="section group">
                <div class="col span_1_of_3">
                     <div class="play">
                         <img src="{% static 'portal/img/rrBGsmall.jpg' %}" />
                         <a class="btn" href="{% url 'game.views.levels' %}">Play Now</a>
                     </div>
                </div>
                 
                <div class="col span_2_of_3">
                   
                    <p>
                    Rapid Router is a fun and engaging education resource which includes a coding game that helps teach children the basic principles of programming. Built on 'Blockly', an easy-to-use visual programming language that's similar to Scratch, Rapid Router enables teachers to monitor and manage individual pupil progress and identify where more support is required.
                    </p>
                    
                </div>
             </div>
        </div>
     
      


      
    </div>

    <div class="col span_1_of_3">
        {% if user.is_authenticated %}
            <div class="login-card">
                <h3>Welcome, {{ user.first_name }}</h3><br>
                <p>You are logged in as {{ user.first_name }} {{ user.last_name }}</p>
                <p>Lost? Go to <a href="{% url 'portal.views.current_user' %}">my homepage</a></p>
                <p>Not you? <a href="{% url 'portal.views.logout_view' %}">Logout</a></p>
            </div>
        {% else %}
            <div id="school-login" class="login-card">
                <h3>School or club student sign in</h3><br>

                <p>Signed up indiviudally? <a href='#' id='switchToSolo'>Click here</a> to sign in.</p>
                <form method='post'>

                    {% csrf_token %}

                    {{ school_login_form.non_field_errors }}

                    {% for field in school_login_form %}
                        {{ field.errors }}
                        <label class="ieLabels">{{ field.html_name }}</label>
                        {{ field }}
                    {% endfor %}

                    <input type='submit' name='school_login' class="btn wide" value='Log in'/>
                </form>
            </div>

            <div id="solo-login" class="login-card">
                <h3>Individual sign in</h3><br>

                <p>Part of a school or club? <a href='#'  id='switchToSchool'>Click here</a> to sign in.</p>

                <form method='post'>

                    {% csrf_token %}

                    {{ solo_login_form.non_field_errors }}

                    {% for field in solo_login_form %}
                        {{ field.errors }}
                        <label class="ieLabels">{{ field.html_name }}</label>
                        {{ field }}
                    {% endfor %}

                    <input type='submit' name='solo_login' class="btn wide" value='Log in'/>
                </form>

                <div class="login-help">
                    <a href="{% url 'portal.views.student_password_reset' %}">Forgotten Password?</a>
                </div>
            </div>

        <br>

        <div id="signup" class="login-card">
            <h3>Register to track your performance</h3><br>

            <p id='signup-warning' >If you're not part of a school or club who are signed up to Code for Life, <a href='#' id='signupShow'>click here</a> to sign up as an individual.</p>

            <form id="signup-form" method='post'>

                {% csrf_token %}

                {{ signup_form.non_field_errors }}

                {{ signup_form.name.errors }}
                <label class="ieLabels">{{ signup_form.name.html_name }}</label>
                {{ signup_form.name }}

                {{ signup_form.username.errors }}
                <label class="ieLabels">{{ signup_form.username.html_name }}</label>
                {{ signup_form.username }}

                {{ signup_form.email.errors }}
                <label class="ieLabels">{{ signup_form.email.html_name }}</label>
                {{ signup_form.email }}

                <div class='section group'>
                    <div class='col span_2_of_3 password-strength-bar-container'>
                        <div class='password-strength-bar'></div>
                    </div>
                    <div class='col span_1_of_3 password-strength-text'></div>
                </div>

                {{ signup_form.password.errors }}
                <label class="ieLabels">{{ signup_form.password.html_name }}</label>
                {{ signup_form.password }}

                {{ signup_form.confirm_password.errors }}
                <label class="ieLabels">{{ signup_form.confirm_password.html_name }}</label>
                {{ signup_form.confirm_password }}

                <input type='submit' name='signup' class="btn wide" value='Register'/>
            </form>
        </div>
        {% endif %}
    </div>
</div>

{% endblock content %}
