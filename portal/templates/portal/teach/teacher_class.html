{% extends 'portal/teach/base.html' %}
{% load static %}
{% load app_tags %}

{% block nav_teacher_classes %}<b><a href="{% url 'portal.views.teacher_classes' %}">Classes</a></b>{% endblock nav_teacher_classes %}

{% block scripts %}
{{block.super}}
<script type="text/javascript" src="{% static 'portal/js/studentList.js' %}"></script>
<script>
var CLASS_CODE = "{{ class.access_code }}";
var MOVE_STUDENTS_URL = "{% url 'portal.views.teacher_move_students' class.access_code %}";
var DELETE_STUDENTS_URL = "{% url 'portal.views.teacher_delete_students' class.access_code %}";
var DISMISS_STUDENTS_URL = "{% url 'portal.views.teacher_dismiss_students' class.access_code %}";
</script>
{% endblock %}


{% block content %}

<h1>Classes</h1><br>
<h2>{{ user|make_into_username }}, {{ class.name }} ({{ class.access_code }})</h2>

<p>COPY concise but complete description of class management page.</p>

<div class="section group">
    <div class="col span_1_of_2">
        <div class="section group">
            <h3 class='col'>Current students</h3>
        {% if students %}
            <a class='col btn btn-primary pull-right' href="{% url 'portal.views.teacher_print_reminder_cards' class.access_code %}">Print Reminder Cards</a>
        {% endif %}
        </div>

        {% if students %}
        <div class="section group">
            <p>Click on a student to change their name, or set or generate a new password.</p>
        </div>
            <table class='CSSTable wide alternate smaller'>
                <tr>
                    <th style='text-align: center'><input type='checkbox' id='selectedStudentsListToggle' name='selectedStudentsListToggle' value='1'></th>
                    <th>Student Name</th>
                </tr>
                {% for student in students %}
                    <tr>
                        <td style='text-align: center'><input type='checkbox' class='student' name='{{ student.id }}' value='1'></td>
                        <td><a href="{% url 'portal.views.teacher_edit_student' student.id %}">{{ student.user.user.first_name }}</a></td>
                    </tr>
                {% endfor %}
            </table>
            <div class='section group'>
                <div class='col' style='line-height: 30px; padding-left: 20px'>(<span id="num_students_selected">0</span>/{{ num_students }} selected)</div>
                <div class='col pull-right'>
                    <button class='btn btn-default btn-small' id='moveSelectedStudents'>Move</button>
                    <button class='btn btn-default btn-small' id='dismissSelectedStudents'>Release</button>
                    <button class='btn btn-danger btn-small' id='deleteSelectedStudents'>Delete</button>
                </div>
            </div>
            {% else %}
                <p>There are no students in this class. Add some students to get started!</p>
            {% endif %}
        <br/>
    </div>


    <div class="col span_1_of_2">
        <div class='login-card'>
            <h3>New Students</h3><br/>

            <p>Type the students' names in the box below with one name per line. Note that names must be unique within a class. Students will use these names plus the class's access code to sign in.</p>

            <form method='POST'>

                {% csrf_token %}

                {{ new_students_form.non_field_errors }}

                {{ new_students_form.names.errors }}
                {{ new_students_form.names }}

                <input type='submit' class='btn btn-primary wide' name='new_students' value='Add students'/>
        </div>
    </div>
</div>

<div class="section group">
    <h3>Edit other class settings</h3>

    <p>You may change this class's name, transfer the class to another teacher in the school or club, setup whether the class can accept requests from external students, and setup whether students in this class will be able to see their classmates' progress.</p>
    <p>You may also delete the class if it has no students.</p>
    </div>
    <div class="section group">
        <a class='btn btn-default btn-small' href="{% url 'portal.views.teacher_edit_class' class.access_code %}">Edit Settings</a>
        <a class='btn btn-danger btn-small' href="{% url 'portal.views.teacher_delete_class' class.access_code %}">Delete Class</a>
    </div>

</div>

{% endblock %}
