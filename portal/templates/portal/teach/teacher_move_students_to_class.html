{% extends 'portal/teach/base.html' %}
{% load static %}

{% block nav_teacher_classes %}<b><a href="{% url 'portal.views.teacher_classes' %}">Classes</a></b>{% endblock nav_teacher_classes %}

{% block content %}

<div class='section group'>
    <div class='col span_1_of_2'>
        <h3>Students currently in destination class</h3><br>
        {% if new_class_students %}
            <p>The following students are in the class {{ new_class.name }} ({{ new_class.access_code }}) into which you are about to move students from your class {{ old_class.name }} ({{ old_class.access_code }}).</p>
            <table class='CSSTable' width='100%'>
                <tr>
                    <td>Student Name</td>
                </tr>
                    {% for student in new_class_students %}
                        <tr>
                            <td>{{ student.user.user.first_name }}</td>
                        </tr>
                    {% endfor %}
            </table>
        {% else %}
            <p>There are no students in the class {{ new_class.name }} ({{ new_class.access_code }}).</p>
        {% endif %}
    </div>

    <div class='col span_1_of_2'>
        <div class='login-card'>
            <h3>Students to transfer</h3><br>

            <p>Please confirm the details for adding the following students to the class {{ new_class.name }} ({{ new_class.access_code }}) from your class {{ old_class.name }} ({{ old_class.access_code }}). Remember their names must be unique in the new class.</p>

            <form method='POST'>

                {% csrf_token %}

                {{ formset.management_form }}

                <table class='CSSTable' width='100%'>
                    <tr>
                        <td>Original Student Name</td>
                        <td>New Student Name</td>
                    </tr>
                        {{ formset.non_form_errors }}
                        {% for dict in formset.errors %}
                            {% for error in dict.values %}
                                {{ error }}
                            {% endfor %}
                        {% endfor %}
                        {% for form in formset %}
                            <tr>
                                <td>{{ form.orig_name.value }}{{ form.orig_name }}</td>
                                <td>{{ form.name }}</td>
                            </tr>
                        {% endfor %}
                </table>

                <div class='section group'>
                    <a class='col span_1_of_3 btn' href="{% url 'portal.views.teacher_class' old_class.access_code %}">Cancel</a>

                    <div class='col span_1_of_3 pull-right'>
                        <input type='hidden' name='new_class' value='{{ new_class.id }}'/>
                        <input type='submit' name='submit_disambiguation' class='btn' value='Save'/>
                    </div>
                </div>

            </form>
        </div>
    </div>
</div>

{% endblock %}
