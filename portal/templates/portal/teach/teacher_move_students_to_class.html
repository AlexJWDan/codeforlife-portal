{% extends 'portal/teach/base.html' %}
{% load static %}

{% block title %}Code For Life - Portal{% endblock %}

{% block content %}

<div class='section group'>
    <div class='col span_1_of_2'>
        <h3>Students currently in class</h3><br>
        <table class='CSSTable' width='100%'>
            <tr>
                <td>Student Name</td>
            </tr>
                {% for student in new_class_students %}
                    <tr>
                        <td>{{ student.name }}</td>
                    </tr>
                {% endfor %}
        </table>
    </div>

    <div class='col span_1_of_2'>
        <div class='login-card'>
            <h3>Students to transfer</h3><br>

            <p>Please confirm the details for adding the following students to the class {{ new_class.name }} ({{ new_class.access_code }}) from your class {{ old_class.name }} ({{ old_class.access_code }}). Remember their names must be unique in the new class.</p>

            <form method='POST'>

                {% csrf_token %}

                {{ formset.management_form }}

                <table class='CSSTable' width='100%'>
                    <tr>
                        <td>Original Student Name</td>
                        <td>New Student Name</td>
                    </tr>
                        {{ formset.non_form_errors }}
                        {% for dict in formset.errors %}
                            {% for error in dict.values %}
                                {{ error }}
                            {% endfor %}
                        {% endfor %}
                        {% for form in formset %}
                            <tr>
                                <td>{{ form.orig_name }}</td>
                                <td>{{ form.name }}</td>
                            </tr>
                        {% endfor %}
                </table>

                <div class='section group'>
                    <a class='col span_1_of_3 btn' href="{% url 'portal.views.teacher_class' old_class.access_code %}">Cancel</a>

                    <div class='col span_1_of_3 pull-right'>
                        <input type='hidden' name='new_class' value='{{ new_class.id }}'/>
                        <input type='submit' name='submit_disambiguation' class='btn' value='Save'/>
                    </div>
                </div>

            </form>
        </div>
    </div>
</div>

{% endblock %}
