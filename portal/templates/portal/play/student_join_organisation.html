{% extends 'portal/play/base.html' %}
{% load static %}

{% block title %}Code For Life - Portal{% endblock %}

{% block content %}

<div class='section group'>

    {% if student.pending_class_request %}
        <div class='span_centered_half'>
            <div class='login-card'>
                <h3>Join school request pending</h3><br>

                <p>Your request to join class <b>{{ student.pending_class_request.access_code }}</b> in school <b>{{ student.pending_class_request.teacher.school.name }}</b> is still pending.</p>

                <p>The teacher for that class must review and approve the request to complete the process.</p>

                <p>If successful, the teacher will then contact you with your new login details.</p>

                <p><b>Warning:</b> once the teacher accepts you to their class, this cannot be undone - you cannot later elect to leave a school!</p>

                <p>You may revoke your request now, before the teacher makes their decision.</p>

                <form method='post'>

                    {% csrf_token %}

                    <div class='section group'>
                        <a class='col span_1_of_3 btn' href="{% url 'portal.views.student_details' %}">Back</a>

                        <div class='col span_1_of_3 pull-right'>
                            <input type='submit' name='revoke_join_request' class='btn' value="Revoke join request"/>
                        </div>
                    </div>

                </form>

            </div>
        </div>

    {% else %}
        <div class='span_centered_half'>

            <div class='login-card'>
                <h3>Join school</h3><br>

                <p>If you want to link your Code For Life account with a school or club, ask a teacher from the group for the following information, and submit a request!</p>

                <p><b>Warning:</b> once the teacher accepts you to their class, this cannot be undone - you cannot later elect to leave a school!</p>

                <p>If successful, the teacher will then contact you with your new login details.</p>

                <form method='post'>

                    {% csrf_token %}

                    {{ request_form.non_field_errors }}

                    {{ request_form.school.errors }}
                    <label class="ieLabels">{{ form.school.html_name }}</label>
                    {{ request_form.school }}

                    {{ request_form.access_code.errors }}
                    <label class="ieLabels">{{ form.access_code.html_name }}</label>
                    {{ request_form.access_code }}

                    <div class='section group'>
                        <a class='col span_1_of_3 btn' href="{% url 'portal.views.student_details' %}">Cancel</a>

                        <div class='col span_1_of_3 pull-right'>
                            <input type='submit' name='class_join_request' class='btn' value="Request"/>
                        </div>
                    </div>
                </form>

            </div>

        </div>
    {% endif %}
</div>

{% endblock %}
